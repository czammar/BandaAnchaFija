BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
View(BAF_study)
View(technology_resume)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Seleccionamos algunas variables de la base
BAF_study %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Seleccionamos algunas variables de la base
BAF_study <- BAF_raw %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
View(BAF_study)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
##
BAF_study <- BAF_study %>% select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, TECNO_ACCESO_INTERNET, A_TOTAL_E)
View(BAF_study)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Seleccionamos algunas variables de la base
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
##
BAF_study <- BAF_study %>% select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E)
View(BAF_study)
head(BAF_study %>% spread(K_ACCESO_INTERNET, A_TOTAL_E))
prueba <- BAF_study %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
View(prueba)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Seleccionamos algunas variables de la base
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
##
BAF_study <- BAF_study %>% select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E)
prueba <- BAF_study %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
View(prueba)
View(technology_resume)
colnames(prueba$`01`) <- CABLE_COAXIAL
colnames(prueba$`01`) <- "CABLE_COAXIAL"
colnames(prueba$`01`) <- c("CABLE_COAXIAL")
names(prueba)[names(prueba) == `01`] <- "COAXIAL"
names(prueba)[names(prueba) == "`01`"] <- "COAXIAL"
View(prueba)
names(prueba)[colnames(prueba) == "`01`"] <- "COAXIAL"
View(prueba)
names(prueba)
names(prueba)[8] <- "CABLE_COAXIAL"
View(prueba)
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[8] <- "CABLE_COAXIAL"
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Transformacion y limpieza de la base de accesos
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
View(BAF_study)
View(technology_resume)
View(BAF_study)
BAF_study %>% mutate(ALL_ACCESS = sum(CABLE_COAXIAL:SIN_TECNOLOGIA_ESPECIFICADA))
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Transformacion y limpieza de la base de accesos
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
BAF_study %>% mutate(ALL_ACCESS = sum(CABLE_COAXIAL,DSL,FIBRA_OPTICA,SATELITAL,TERRESTRE_FIJO_INALAMBRICO,OTRAS_TECNOLOGIAS,SIN_TECNOLOGIA_ESPECIFICADA))
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Transformacion y limpieza de la base de accesos
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
BAF_study <- BAF_study %>% mutate(ALL_ACCESS = sum(CABLE_COAXIAL,DSL,FIBRA_OPTICA,SATELITAL,TERRESTRE_FIJO_INALAMBRICO,OTRAS_TECNOLOGIAS,SIN_TECNOLOGIA_ESPECIFICADA))
View(BAF_study)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Transformacion y limpieza de la base de accesos
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
BAF_study <- BAF_study %>% mutate(ALL_ACCESS = CABLE_COAXIAL+DSL+FIBRA_OPTICA+SATELITAL+TERRESTRE_FIJO_INALAMBRICO+OTRAS_TECNOLOGIAS+SIN_TECNOLOGIA_ESPECIFICADA)
View(BAF_study)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Transformacion y limpieza de la base de accesos
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
# Agregamos columna de todos los accesos del municipio
BAF_study <- BAF_study %>% mutate(ALL_ACCESS = CABLE_COAXIAL+DSL+FIBRA_OPTICA+SATELITAL+TERRESTRE_FIJO_INALAMBRICO+OTRAS_TECNOLOGIAS+SIN_TECNOLOGIA_ESPECIFICADA)
# Agregamos columna de todos los accesos cable coaxial y fibra optica del municipio
BAF_study <- BAF_study %>% mutate(COAX_FO = CABLE_COAXIAL+FIBRA_OPTICA)
View(BAF_study)
BAF_study2019 <-  subset(BAF_study, ANIO == "2019", MES == "06")
BAF_study2019 <-  subset(BAF_study, ANIO == "2019")
View(BAF_study2019)
BAF_study2019 <-  subset(BAF_study, ANIO == "2019" & MES == "09")
BAF_study2019 <-  subset(BAF_study, ANIO == "2019" && MES == "09")
BAF_study2019 <-  subset(BAF_study, ANIO == "2019" )
View(BAF_study2019)
BAF_study2019 <-  subset(BAF_study, ANIO == "2019" & MES == "06" )
View(BAF_study2019)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
# Carga base de datos de accesos de banda ancha fija
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
# Tabla resumen de conexiones por anio
year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
# Tabla resumen de conexiones por anio, con desagregacion de tecnologia
technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
# Transformacion y limpieza de la base de accesos
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
# Agregamos columna de todos los accesos del municipio
BAF_study <- BAF_study %>% mutate(ALL_ACCESS = CABLE_COAXIAL+DSL+FIBRA_OPTICA+SATELITAL+TERRESTRE_FIJO_INALAMBRICO+OTRAS_TECNOLOGIAS+SIN_TECNOLOGIA_ESPECIFICADA)
# Agregamos columna de todos los accesos cable coaxial y fibra optica del municipio
BAF_study <- BAF_study %>% mutate(COAX_FO = CABLE_COAXIAL+FIBRA_OPTICA)
BAF_062019 <-  subset(BAF_study, ANIO == "2019" & MES == "06" )
View(BAF_062019)
BAF_062019 <-  subset(BAF_study, ANIO == "2019" & MES == "06" & K_MUNICIPIO !== "999" )
BAF_062019 <-  subset(BAF_study, ANIO == "2019" & MES == "06" & K_MUNICIPIO != "999" )
View(BAF_062019)
BAF_062019 <-  subset(BAF_study, ANIO == "2019" & MES == "06" & K_ENTIDAD != "99"  & K_MUNICIPIO != "999" )
View(BAF_062019)
library(readr)
library(dplyr)
library(ggplot2)
#library("tidyverse")
######---- Carga base de datos de accesos de banda ancha fija ----######
BAF_raw <- read_csv("TODO_BAF/TD_ACC_BAF_ITE_VA.csv",
col_types = cols(ANIO = col_character(),
K_ACCESO_INTERNET = col_character(),
K_ENTIDAD = col_character(), K_MUNICIPIO = col_character(),
MES = col_character()), locale = locale(encoding = "ISO-8859-1"))
######---- Transformacion y limpieza de la base de accesos ----#####
## Crea una llave para cruzar con las otras bases
BAF_study <- BAF_raw
BAF_study$K_MUNICIPIO <- substr(BAF_study$K_MUNICIPIO,3,5)
BAF_study <- BAF_study  %>% mutate(K_ENTIDAD_MUNICIPIO = paste(K_ENTIDAD, K_MUNICIPIO, sep = ""))
## seleccion variable y alarga la bases de accesos por tecnologia
BAF_study <- BAF_study %>%
select(K_ENTIDAD_MUNICIPIO, K_ENTIDAD, K_MUNICIPIO, ANIO, MES, CONCESIONARIO, EMPRESA, K_ACCESO_INTERNET, A_TOTAL_E) %>% spread(K_ACCESO_INTERNET, A_TOTAL_E)
## El detalle de accesos a nivel municipal con NA se imputa con cero
BAF_study <- BAF_study %>% mutate_all(~replace(., is.na(.), 0))
# Renombramos columnas de accesos segun su tecnologia
names(BAF_study)[8] <- "CABLE_COAXIAL"
names(BAF_study)[9] <- "DSL"
names(BAF_study)[10] <- "FIBRA_OPTICA"
names(BAF_study)[11] <- "SATELITAL"
names(BAF_study)[12] <- "TERRESTRE_FIJO_INALAMBRICO"
names(BAF_study)[13] <- "OTRAS_TECNOLOGIAS"
names(BAF_study)[14] <- "SIN_TECNOLOGIA_ESPECIFICADA"
# Agregamos columna de todos los accesos del municipio
BAF_study <- BAF_study %>% mutate(ALL_ACCESS = CABLE_COAXIAL+DSL+FIBRA_OPTICA+SATELITAL+TERRESTRE_FIJO_INALAMBRICO+OTRAS_TECNOLOGIAS+SIN_TECNOLOGIA_ESPECIFICADA)
# Agregamos columna de todos los accesos cable coaxial y fibra optica del municipio
BAF_study <- BAF_study %>% mutate(COAX_FO = CABLE_COAXIAL+FIBRA_OPTICA)
# Se excluyen los datos de accesos que no tienen ubicacion de municipio
BAF_062019 <-  subset(BAF_study, ANIO == "2019" & MES == "06" & K_ENTIDAD != "99"  & K_MUNICIPIO != "999" )
####---- Resumenes
# # Tabla resumen de conexiones por anio
# year_resume <- BAF_raw %>% select(ANIO, MES, A_TOTAL_E) %>% group_by(ANIO,MES) %>%
#   summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
#
# year_resume <- mutate(year_resume, key_yearmonth = paste(year_resume$ANIO, year_resume$MES,sep = ""))
#
# #ggplot(year_resume, aes(key_yearmonth, n)) + geom_bar(stat = "identity")
#
# # Tabla resumen de conexiones por anio, con desagregacion de tecnologia
# technology_resume<-BAF_raw %>% select(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET, A_TOTAL_E) %>% group_by(ANIO, MES, K_ACCESO_INTERNET, TECNO_ACCESO_INTERNET) %>%
#   summarize(n=sum(A_TOTAL_E,na.rm = TRUE)/1000000) %>% ungroup()
View(BAF_062019)
write_csv(BAF_062019, "../BAF_06209.csv")
getwd()
write_csv(BAF_062019, "BAF_06209.csv")
library(readr)
inafed_clean <- read_csv("INAFED/inafed_clean.csv",
locale = locale(encoding = "ISO-8859-1"))
View(inafed_clean)
View(inafed_clean)
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed ----######
inafed_clean <- read_csv("INAFED/inafed_clean.csv")
View(inafed_clean)
library(tidyverse)
glimpse(inafed_clean)
names(inafed_clean)
View(inafed_clean)
INAFED <- INAFED %>% select("cve_inegi","id_estado","id_municipio","superficie")
INAFED <- read_csv("INAFED/inafed_clean.csv")
INAFED <- INAFED %>% select("cve_inegi","id_estado","id_municipio","superficie")
View(INAFED)
View(inafed_clean)
rm(inafed_clean)
rm(INAFED)
INAFED <- read_csv("INAFED/inafed_clean.csv") %>% select("cve_inegi","id_estado","id_municipio","superficie")
View(INAFED)
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed ----######
INAFED <- read_csv("INAFED/inafed_clean.csv") %>%
select("cve_inegi","id_estado","id_municipio","superficie")
View(INAFED)
View(INAFED)
View(BAF_raw)
View(BAF_062019)
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed seleccionando datos de superficie----######
INAFED <- read_csv("INAFED/inafed_clean.csv") %>%
select("cve_inegi","id_estado","id_municipio","superficie")
# Acotamos la seleccion a datos por municipio (i.e sin resumenes por estado/pais)
INAFED <- subset(INAFED, id_muncipio != "0")
INAFED <- INAFED %>%  select("cve_inegi","superficie")
# Escribe la base de superficies
write_csv(INAFED, "INAFED_surface.csv")
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed seleccionando datos de superficie----######
INAFED <- read_csv("INAFED/inafed_clean.csv") %>%
select("cve_inegi","id_estado","id_municipio","superficie")
# Acotamos la seleccion a datos por municipio (i.e sin resumenes por estado/pais)
INAFED <- subset(INAFED, id_muncipio != "0")
INAFED <- INAFED %>%  select("cve_inegi","superficie")
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed seleccionando datos de superficie----######
INAFED <- read_csv("INAFED/inafed_clean.csv") %>%
select("cve_inegi","id_estado","id_municipio","superficie")
View(INAFED)
INAFED <- subset(INAFED, id_muncipio != "0")
View(INAFED)
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed seleccionando datos de superficie----######
INAFED <- read_csv("INAFED/inafed_clean.csv") %>%
select("cve_inegi","id_estado","id_municipio","superficie")
# Acotamos la seleccion a datos por municipio (i.e sin resumenes por estado/pais)
INAFED <- subset(INAFED, id_municipio != "0")
INAFED <- INAFED %>%  select("cve_inegi","superficie")
# Escribe la base de superficies
write_csv(INAFED, "INAFED_surface.csv")
View(INAFED)
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed seleccionando datos de superficie----######
INAFED <- read_csv("INAFED/inafed_clean.csv") %>%
select("cve_inegi","id_estado","id_municipio","superficie")
View(INAFED)
library(readr)
library(dplyr)
######---- Carga base de datos de poblacion del inafed seleccionando datos de superficie----######
INAFED <- read_csv("INAFED/inafed_clean.csv")
View(INAFED)
