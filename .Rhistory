print("Caso 2")
pnorm(0.1, mu2, sigma2)
N = 14; z = 11; a = 1; b = 1
base <- ggplot(data_frame(x = c(0, 1)), aes(x))
p1 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b), #inicial
aes(colour = "inicial"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1), #verosimilitud
aes(colour = "verosimilitud"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b), #posterior
aes(colour = "posterior"), show.legend = FALSE) +
labs(y = "", colour = "", x = expression(theta))
N = 14; z = 11; a = 100; b = 100
p2 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b),
aes(colour = "inicial")) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1),
aes(colour = "verosimilitud")) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b),
aes(colour = "posterior")) +
labs(y = "", colour = "", x = expression(theta))
grid.arrange(p1, p2, nrow = 1, widths = c(0.38, 0.62))
library("tidyverse")
N = 14; z = 11; a = 1; b = 1
base <- ggplot(data_frame(x = c(0, 1)), aes(x))
p1 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b), #inicial
aes(colour = "inicial"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1), #verosimilitud
aes(colour = "verosimilitud"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b), #posterior
aes(colour = "posterior"), show.legend = FALSE) +
labs(y = "", colour = "", x = expression(theta))
N = 14; z = 11; a = 100; b = 100
p2 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b),
aes(colour = "inicial")) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1),
aes(colour = "verosimilitud")) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b),
aes(colour = "posterior")) +
labs(y = "", colour = "", x = expression(theta))
grid.arrange(p1, p2, nrow = 1, widths = c(0.38, 0.62))
library(gridExtra)
library(grid)
N = 14; z = 11; a = 1; b = 1
base <- ggplot(data_frame(x = c(0, 1)), aes(x))
p1 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b), #inicial
aes(colour = "inicial"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1), #verosimilitud
aes(colour = "verosimilitud"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b), #posterior
aes(colour = "posterior"), show.legend = FALSE) +
labs(y = "", colour = "", x = expression(theta))
N = 14; z = 11; a = 100; b = 100
p2 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b),
aes(colour = "inicial")) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1),
aes(colour = "verosimilitud")) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b),
aes(colour = "posterior")) +
labs(y = "", colour = "", x = expression(theta))
grid.arrange(p1, p2, nrow = 1, widths = c(0.38, 0.62))
library(gridExtra)
library(grid)
N = 14; z = 11; a = 1; b = 1
base <- ggplot(data_frame(x = c(0, 1)), aes(x))
p1 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b), #inicial
aes(colour = "inicial"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1), #verosimilitud
aes(colour = "verosimilitud"), show.legend = FALSE) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b), #posterior
aes(colour = "posterior"), show.legend = FALSE) +
labs(y = "", colour = "", x = expression(theta))
N = 14; z = 11; a = 100; b = 100
p2 <- base +
stat_function(fun = dbeta, args = list(shape1 = a, shape2 = b),
aes(colour = "inicial")) +
stat_function(fun = dbeta, args = list(shape1 = z + 1, shape2 = N - z + 1),
aes(colour = "verosimilitud")) +
stat_function(fun = dbeta, args = list(shape1 = a + z, shape2 = N - z + b),
aes(colour = "posterior")) +
labs(y = "", colour = "", x = expression(theta))
grid.arrange(p1, p2, nrow = 1, widths = c(0.38, 0.62))
View(p1)
p1
p2
grid.arrange(p1, p2, nrow = 1, widths = c(0.38, 0.62))
library(shiny); runApp('/media/Box/Aprendizaje_Maquina/Projecto/BAF_shiny.R')
beta(1,1)
beta(0.4,0.9)
choose(66,64)
devtools::install_github('diegovalle/mxmaps')
install.packages(c("bayesm", "bayestestR", "callr", "covr", "data.table", "digest", "DT", "funModeling", "future", "ggvis", "haven", "hexbin", "Hmisc", "hms", "htmlTable", "htmltools", "htmlwidgets", "insight", "jomo", "kernlab", "knitr", "later", "pkgbuild", "plotly", "promises", "purrr", "qvcalc", "R6", "RcppArmadillo", "rlang", "rmarkdown", "roxygen2", "rvest", "shiny", "sp", "testthat", "tinytex", "xfun"))
install.packages(c("bayesm", "bayestestR", "callr", "covr", "data.table", "digest", "DT", "funModeling", "future", "ggvis", "haven", "hexbin", "Hmisc", "hms", "htmlTable", "htmltools", "htmlwidgets", "insight", "jomo", "kernlab", "knitr", "later", "pkgbuild", "plotly", "promises", "purrr", "qvcalc", "R6", "RcppArmadillo", "rlang", "rmarkdown", "roxygen2", "rvest", "shiny", "sp", "testthat", "tinytex", "xfun"))
install.packages(c("bayesm", "bayestestR", "callr", "covr", "data.table", "digest", "DT", "funModeling", "future", "ggvis", "haven", "hexbin", "Hmisc", "hms", "htmlTable", "htmltools", "htmlwidgets", "insight", "jomo", "kernlab", "knitr", "later", "pkgbuild", "plotly", "promises", "purrr", "qvcalc", "R6", "RcppArmadillo", "rlang", "rmarkdown", "roxygen2", "rvest", "shiny", "sp", "testthat", "tinytex", "xfun"))
install.packages(c("bayesm", "bayestestR", "callr", "covr", "data.table", "digest", "DT", "funModeling", "future", "ggvis", "haven", "hexbin", "Hmisc", "hms", "htmlTable", "htmltools", "htmlwidgets", "insight", "jomo", "kernlab", "knitr", "later", "pkgbuild", "plotly", "promises", "purrr", "qvcalc", "R6", "RcppArmadillo", "rlang", "rmarkdown", "roxygen2", "rvest", "shiny", "sp", "testthat", "tinytex", "xfun"))
devtools::install_github('diegovalle/mxmaps')
install.packages("rlang")
install.packages("rlang")
install.packages("rlang")
devtools::install_github('diegovalle/mxmaps')
install.packages("tidyverse")
devtools::install_github('diegovalle/mxmaps')
install.packages("devtools")
devtools::install_github('diegovalle/mxmaps')
library(mxmaps)
install.packages(c("R2OpenBUGS", "R2jags"))
install.packages("corrplot")
sample?
)
?sample
sample(1:10, replace = FALSE)
sample(1:14,1, replace = FALSE)
sample(1:14,1, replace = FALSE)
sample(1:14,1, replace = FALSE)
sample(1:14,1, replace = FALSE)
setwd("/media/Box/Aprendizaje_Maquina/Projecto")
library(readr)
library(tidyverse)
library(readxl)
# Establece directorio de trabajo
setwd("/media/Box/Aprendizaje_Maquina/Projecto")
# Crear las bases de datos para trabajar
source("creating_baf.R") # Accesos de banda ancha fija a junio/2019 BIT del IFT
source("creating_conapo.R") # Indice marginacion y porcentaje pob con menos de 2 salarios min, 2015 CONAPO
source("creating_inafed.R") # Superficie de municipios, INAFED
#source("creating_indiceinfraestructura.R")  # Indice infraestructura TII - centro de estudios IFT
source("creating_indicadores_serviciostelecom_viviendas_.R")  # Indicadores de disponiblidad de servicios de telecomunicaciones Encuesta intercensal 2015, INEGI
source("creating_hogares.R") # Hogares por municipios Encuesta intercensal 2015, INEGI
source("creating_poblacion.R") # Poblacion por municipios Encuesta intercensal 2015, INEGI
source("creating_humandevelop_index.R") # Programa de las Naciones Unidas para el Desarrollo (PNUD), datos del Indice de desarollo humano 2015
# Elimina variables auxiliares
rm(index, left_path,name_state,right_path,states_list,cleaning_hog_state,cleaning_pop_state)
# Consolidamos las bases
df <- left_join(hogares2015,poblacion2015, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,conapo, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,INAFED, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,indicadores_servicios2015, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,BAF_062019, by = "K_ENTIDAD_MUNICIPIO")
## El detalle de accesos a nivel municipal con NA se imputa con cero
df <- df %>% mutate_all(~replace(., is.na(.), 0))
df$SUPERFICIE<- as.numeric(df$SUPERFICIE)
df$PO2SM<- as.numeric(df$PO2SM)
# Se eliminan columas sin interes para el analisis
df$K_ENTIDAD<-NULL
df$K_MUNICIPIO<-NULL
df$ANIO<-NULL
df$MES<-NULL
# df1 <- df
# Se cambian algunas variables de caracteres a numericas
# df1 <- df1 %>% select(-K_ENTIDAD_MUNICIPIO,-GM)
df$SPRIM <- as.numeric(df$SPRIM)
df$OVSDE <- as.numeric(df$OVSDE)
df$VHAC <- as.numeric(df$VHAC)
df$OVPT <- as.numeric(df$OVPT)
df$`PL<5000` <- as.numeric(df$`PL<5000`)
# Crea variable de densidad de hogares por kilometros cuadrados
df$DENS_HOGS <- 0
for (i in 1:nrow(df)){
df$DENS_HOGS[i]<- df$HOGARES[i]/df$SUPERFICIE[i]*100
}
# Crea variable de densidad de personas por kilometros cuadrados
#df <- df %>% mutate(DENS_HOGS = df$HOGARES/df$SUPERFICIE)
df$DENS_HABS <- 0
for (i in 1:nrow(df)){
df$DENS_HABS[i]<- df$HOGARES[i]/df$SUPERFICIE[i]*100
}
# Crea variable de penetracion de BAF por cada 100 hogares y la penetracion de cable coaxial + fibra optica
#df <- df %>% mutate(PEN_BAF_HOGS = df$ALL_ACCESS/df$HOGARES*100)
df$PEN_BAF_HOGS_COAXFO <- 0
for (i in 1:nrow(df)){
df$PEN_BAF_HOGS_COAXFO[i]<- df$COAX_FO[i]/df$HOGARES[i]*100
}
# Crea variable de penetracion de BAF por cada 100 habitantes y la penetracion de cable coaxial + fibra optica
#df <- df %>% mutate(PEN_BAF_HABS = df$ALL_ACCESS/df$HOGARES*100)
df$PEN_BAF_HABS_COAXFO <- 0
for (i in 1:nrow(df)){
df$PEN_BAF_HABS_COAXFO[i]<- df$COAX_FO[i]/df$POBLACION[i]*100
}
# Creamos una columna para clasificar los municipios segun su grado de penetracion.
#La clasificación de Penetracion de Fibra Óptica y Cable Coaxial:
# Sin cobertura=0
# Muy baja 0>25%
# Baja 25%>50%
# Media 50%>75%
# Alta 75%>100%
# Muy Alta 100%
df$CLASS_PEN_BAF_HOGS_COAXFO <- 0
for (index in 1:nrow(df)){
df$CLASS_PEN_BAF_HOGS_COAXFO[index] <- if_else(df$PEN_BAF_HOGS_COAXFO[index]==0,0,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=25,1,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=50,2,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=75,3,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=100,4,5)))))
}
# Creamos una columna para clasificar los municipios segun su grado de penetracion.
#La clasificación de Penetracion de Fibra Óptica y Cable Coaxial:
# Sin cobertura=0
# Muy baja 0>25%
# Baja 25%>50%
# Media 50%>75%
# Alta 75%>100%
# Muy Alta 100%
df$CLASS_PEN_BAF_HABS_COAXFO <- 0
for (index in 1:nrow(df)){
df$CLASS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$PEN_BAF_HABS_COAXFO[index]==0,0,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=10,1,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=20,2,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=30.92,3,4))))
}
#----- Agregamos una columna que nos diga la region socioecnomica a la que pertenece el municipio
RegionesSocioEcono <- read_csv("RegionesSocioEcono.csv",
col_types = cols(NOM_ABRE_ENTIDAD = col_skip(),
NOM_ENTIDAD = col_skip(), NUM = col_skip()))
df <- df %>% mutate(K_ENTIDAD = substr(K_ENTIDAD_MUNICIPIO,1,2))
df <- left_join(df,RegionesSocioEcono, by = "K_ENTIDAD")
df$K_ENTIDAD<-NULL
for (index in 1:nrow(df)){
df$REG_SOCIOECONOM[index] <- if_else(df$REG_SOCIOECONOM[index]=="Centronorte",1,
if_else(df$REG_SOCIOECONOM[index]=="Centrosur",2,
if_else(df$REG_SOCIOECONOM[index]=="Noreste",3,
if_else(df$REG_SOCIOECONOM[index]=="Noroeste",4,
if_else(df$REG_SOCIOECONOM[index]=="Occidente",5,
if_else(df$REG_SOCIOECONOM[index]=="Oriente",6,
if_else(df$REG_SOCIOECONOM[index]=="Sureste",7,8)))))))
}
# Adjuntamos los datos de indices de derechos humanos
df <- left_join(df, hd_index2015, by = "K_ENTIDAD_MUNICIPIO")
View(df)
names(df)
df1<- df %>% select(K_ENTIDAD_MUNICIPIO, HOGARES, POBLACION, SUPERFICIE, DENS_HOGS, DENS_HABS,
ANALF, SPRIM, ANOS_PROMEDIO_DE_ESCOLARIDAD,OVSAE, OVSEE, PL<5000, PO2SM, INGRESOPC_ANUAL,
DISP_INTERNET, DISP_TV_PAGA, DISP_TEL_CELULAR, DISP_TEL_FIJO,
NUM_OPS, PEN_BAF_HOGS_COAXFO)
df1<- df %>% select(K_ENTIDAD_MUNICIPIO, HOGARES, POBLACION, SUPERFICIE, DENS_HOGS, DENS_HABS,
ANALF, SPRIM, ANOS_PROMEDIO_DE_ESCOLARIDAD,OVSAE, OVSEE, 'PL<5000', PO2SM, INGRESOPC_ANUAL,
DISP_INTERNET, DISP_TV_PAGA, DISP_TEL_CELULAR, DISP_TEL_FIJO,
NUM_OPS, PEN_BAF_HOGS_COAXFO)
View(df1)
df$IS_PEN_BAF_HABS_COAXFO <- 0
for (index in 1:nrow(df)){
df$IS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$PEN_BAF_HABS_COAXFO[index]==0,0,1)
}
df$IS_PEN_BAF_HABS_COAXFO <- 0
View(df)
for (index in 1:nrow(df)){
df$IS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$CLASS_PEN_BAF_HABS_COAXFO[index]==0,0,1)
}
library(readr)
library(tidyverse)
library(readxl)
# Establece directorio de trabajo
setwd("/media/Box/Aprendizaje_Maquina/Projecto")
# Crear las bases de datos para trabajar
source("creating_baf.R") # Accesos de banda ancha fija a junio/2019 BIT del IFT
source("creating_conapo.R") # Indice marginacion y porcentaje pob con menos de 2 salarios min, 2015 CONAPO
source("creating_inafed.R") # Superficie de municipios, INAFED
#source("creating_indiceinfraestructura.R")  # Indice infraestructura TII - centro de estudios IFT
source("creating_indicadores_serviciostelecom_viviendas_.R")  # Indicadores de disponiblidad de servicios de telecomunicaciones Encuesta intercensal 2015, INEGI
source("creating_hogares.R") # Hogares por municipios Encuesta intercensal 2015, INEGI
source("creating_poblacion.R") # Poblacion por municipios Encuesta intercensal 2015, INEGI
source("creating_humandevelop_index.R") # Programa de las Naciones Unidas para el Desarrollo (PNUD), datos del Indice de desarollo humano 2015
# Elimina variables auxiliares
rm(index, left_path,name_state,right_path,states_list,cleaning_hog_state,cleaning_pop_state)
# Consolidamos las bases
df <- left_join(hogares2015,poblacion2015, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,conapo, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,INAFED, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,indicadores_servicios2015, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,BAF_062019, by = "K_ENTIDAD_MUNICIPIO")
## El detalle de accesos a nivel municipal con NA se imputa con cero
df <- df %>% mutate_all(~replace(., is.na(.), 0))
df$SUPERFICIE<- as.numeric(df$SUPERFICIE)
df$PO2SM<- as.numeric(df$PO2SM)
# Se eliminan columas sin interes para el analisis
df$K_ENTIDAD<-NULL
df$K_MUNICIPIO<-NULL
df$ANIO<-NULL
df$MES<-NULL
# df1 <- df
# Se cambian algunas variables de caracteres a numericas
# df1 <- df1 %>% select(-K_ENTIDAD_MUNICIPIO,-GM)
df$SPRIM <- as.numeric(df$SPRIM)
df$OVSDE <- as.numeric(df$OVSDE)
df$VHAC <- as.numeric(df$VHAC)
df$OVPT <- as.numeric(df$OVPT)
df$`PL<5000` <- as.numeric(df$`PL<5000`)
# Crea variable de densidad de hogares por kilometros cuadrados
df$DENS_HOGS <- 0
for (i in 1:nrow(df)){
df$DENS_HOGS[i]<- df$HOGARES[i]/df$SUPERFICIE[i]*100
}
# Crea variable de densidad de personas por kilometros cuadrados
#df <- df %>% mutate(DENS_HOGS = df$HOGARES/df$SUPERFICIE)
df$DENS_HABS <- 0
for (i in 1:nrow(df)){
df$DENS_HABS[i]<- df$HOGARES[i]/df$SUPERFICIE[i]*100
}
# Crea variable de penetracion de BAF por cada 100 hogares y la penetracion de cable coaxial + fibra optica
#df <- df %>% mutate(PEN_BAF_HOGS = df$ALL_ACCESS/df$HOGARES*100)
df$PEN_BAF_HOGS_COAXFO <- 0
for (i in 1:nrow(df)){
df$PEN_BAF_HOGS_COAXFO[i]<- df$COAX_FO[i]/df$HOGARES[i]*100
}
# Crea variable de penetracion de BAF por cada 100 habitantes y la penetracion de cable coaxial + fibra optica
#df <- df %>% mutate(PEN_BAF_HABS = df$ALL_ACCESS/df$HOGARES*100)
df$PEN_BAF_HABS_COAXFO <- 0
for (i in 1:nrow(df)){
df$PEN_BAF_HABS_COAXFO[i]<- df$COAX_FO[i]/df$POBLACION[i]*100
}
# Creamos una columna para clasificar los municipios segun su grado de penetracion.
#La clasificación de Penetracion de Fibra Óptica y Cable Coaxial:
# Sin cobertura=0
# Muy baja 0>25%
# Baja 25%>50%
# Media 50%>75%
# Alta 75%>100%
# Muy Alta 100%
df$CLASS_PEN_BAF_HOGS_COAXFO <- 0
for (index in 1:nrow(df)){
df$CLASS_PEN_BAF_HOGS_COAXFO[index] <- if_else(df$PEN_BAF_HOGS_COAXFO[index]==0,0,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=25,1,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=50,2,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=75,3,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=100,4,5)))))
}
# Creamos una columna para clasificar los municipios segun su grado de penetracion.
#La clasificación de Penetracion de Fibra Óptica y Cable Coaxial:
# Sin cobertura=0
# Muy baja 0>25%
# Baja 25%>50%
# Media 50%>75%
# Alta 75%>100%
# Muy Alta 100%
df$CLASS_PEN_BAF_HABS_COAXFO <- 0
for (index in 1:nrow(df)){
df$CLASS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$PEN_BAF_HABS_COAXFO[index]==0,0,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=10,1,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=20,2,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=30.92,3,4))))
}
df$IS_PEN_BAF_HABS_COAXFO <- 0
for (index in 1:nrow(df)){
df$IS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$CLASS_PEN_BAF_HABS_COAXFO[index]==0,0,1)
}
#----- Agregamos una columna que nos diga la region socioecnomica a la que pertenece el municipio
RegionesSocioEcono <- read_csv("RegionesSocioEcono.csv",
col_types = cols(NOM_ABRE_ENTIDAD = col_skip(),
NOM_ENTIDAD = col_skip(), NUM = col_skip()))
df <- df %>% mutate(K_ENTIDAD = substr(K_ENTIDAD_MUNICIPIO,1,2))
df <- left_join(df,RegionesSocioEcono, by = "K_ENTIDAD")
df$K_ENTIDAD<-NULL
for (index in 1:nrow(df)){
df$REG_SOCIOECONOM[index] <- if_else(df$REG_SOCIOECONOM[index]=="Centronorte",1,
if_else(df$REG_SOCIOECONOM[index]=="Centrosur",2,
if_else(df$REG_SOCIOECONOM[index]=="Noreste",3,
if_else(df$REG_SOCIOECONOM[index]=="Noroeste",4,
if_else(df$REG_SOCIOECONOM[index]=="Occidente",5,
if_else(df$REG_SOCIOECONOM[index]=="Oriente",6,
if_else(df$REG_SOCIOECONOM[index]=="Sureste",7,8)))))))
}
# Adjuntamos los datos de indices de derechos humanos
df <- left_join(df, hd_index2015, by = "K_ENTIDAD_MUNICIPIO")
# ---- Seleccionamos columnas para el analisis
df1<- df %>% select(K_ENTIDAD_MUNICIPIO, HOGARES, POBLACION, SUPERFICIE, DENS_HOGS, DENS_HABS,
ANALF, SPRIM, ANOS_PROMEDIO_DE_ESCOLARIDAD,OVSAE, OVSEE, 'PL<5000', PO2SM, INGRESOPC_ANUAL,
DISP_INTERNET, DISP_TV_PAGA, DISP_TEL_CELULAR, DISP_TEL_FIJO,
NUM_OPS, PEN_BAF_HOGS_COAXFO, IS_PEN_BAF_HOGS_COAXFO)
View(df)
df$IS_PEN_BAF_HABS_COAXFO <- 0
View(df)
View(df)
for (index in 1:nrow(df)){
df$IS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$CLASS_PEN_BAF_HABS_COAXFO[index]!=0,1,0)
}
df1<- df %>% select(K_ENTIDAD_MUNICIPIO, HOGARES, POBLACION, SUPERFICIE, DENS_HOGS, DENS_HABS,
ANALF, SPRIM, ANOS_PROMEDIO_DE_ESCOLARIDAD,OVSAE, OVSEE, 'PL<5000', PO2SM, INGRESOPC_ANUAL,
DISP_INTERNET, DISP_TV_PAGA, DISP_TEL_CELULAR, DISP_TEL_FIJO,
NUM_OPS, PEN_BAF_HOGS_COAXFO, IS_PEN_BAF_HABS_COAXFO)
View(df1)
library(readr)
library(tidyverse)
library(readxl)
# Establece directorio de trabajo
setwd("/media/Box/Aprendizaje_Maquina/Projecto")
# Crear las bases de datos para trabajar
source("creating_baf.R") # Accesos de banda ancha fija a junio/2019 BIT del IFT
source("creating_conapo.R") # Indice marginacion y porcentaje pob con menos de 2 salarios min, 2015 CONAPO
source("creating_inafed.R") # Superficie de municipios, INAFED
#source("creating_indiceinfraestructura.R")  # Indice infraestructura TII - centro de estudios IFT
source("creating_indicadores_serviciostelecom_viviendas_.R")  # Indicadores de disponiblidad de servicios de telecomunicaciones Encuesta intercensal 2015, INEGI
source("creating_hogares.R") # Hogares por municipios Encuesta intercensal 2015, INEGI
source("creating_poblacion.R") # Poblacion por municipios Encuesta intercensal 2015, INEGI
source("creating_humandevelop_index.R") # Programa de las Naciones Unidas para el Desarrollo (PNUD), datos del Indice de desarollo humano 2015
# Elimina variables auxiliares
rm(index, left_path,name_state,right_path,states_list,cleaning_hog_state,cleaning_pop_state)
# Consolidamos las bases
df <- left_join(hogares2015,poblacion2015, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,conapo, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,INAFED, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,indicadores_servicios2015, by = "K_ENTIDAD_MUNICIPIO")
df <- left_join(df,BAF_062019, by = "K_ENTIDAD_MUNICIPIO")
## El detalle de accesos a nivel municipal con NA se imputa con cero
df <- df %>% mutate_all(~replace(., is.na(.), 0))
df$SUPERFICIE<- as.numeric(df$SUPERFICIE)
df$PO2SM<- as.numeric(df$PO2SM)
# Se eliminan columas sin interes para el analisis
df$K_ENTIDAD<-NULL
df$K_MUNICIPIO<-NULL
df$ANIO<-NULL
df$MES<-NULL
# df1 <- df
# Se cambian algunas variables de caracteres a numericas
# df1 <- df1 %>% select(-K_ENTIDAD_MUNICIPIO,-GM)
df$SPRIM <- as.numeric(df$SPRIM)
df$OVSDE <- as.numeric(df$OVSDE)
df$VHAC <- as.numeric(df$VHAC)
df$OVPT <- as.numeric(df$OVPT)
df$`PL<5000` <- as.numeric(df$`PL<5000`)
# Crea variable de densidad de hogares por kilometros cuadrados
df$DENS_HOGS <- 0
for (i in 1:nrow(df)){
df$DENS_HOGS[i]<- df$HOGARES[i]/df$SUPERFICIE[i]*100
}
# Crea variable de densidad de personas por kilometros cuadrados
#df <- df %>% mutate(DENS_HOGS = df$HOGARES/df$SUPERFICIE)
df$DENS_HABS <- 0
for (i in 1:nrow(df)){
df$DENS_HABS[i]<- df$HOGARES[i]/df$SUPERFICIE[i]*100
}
# Crea variable de penetracion de BAF por cada 100 hogares y la penetracion de cable coaxial + fibra optica
#df <- df %>% mutate(PEN_BAF_HOGS = df$ALL_ACCESS/df$HOGARES*100)
df$PEN_BAF_HOGS_COAXFO <- 0
for (i in 1:nrow(df)){
df$PEN_BAF_HOGS_COAXFO[i]<- df$COAX_FO[i]/df$HOGARES[i]*100
}
# Crea variable de penetracion de BAF por cada 100 habitantes y la penetracion de cable coaxial + fibra optica
#df <- df %>% mutate(PEN_BAF_HABS = df$ALL_ACCESS/df$HOGARES*100)
df$PEN_BAF_HABS_COAXFO <- 0
for (i in 1:nrow(df)){
df$PEN_BAF_HABS_COAXFO[i]<- df$COAX_FO[i]/df$POBLACION[i]*100
}
# Creamos una columna para clasificar los municipios segun su grado de penetracion.
#La clasificación de Penetracion de Fibra Óptica y Cable Coaxial:
# Sin cobertura=0
# Muy baja 0>25%
# Baja 25%>50%
# Media 50%>75%
# Alta 75%>100%
# Muy Alta 100%
df$CLASS_PEN_BAF_HOGS_COAXFO <- 0
for (index in 1:nrow(df)){
df$CLASS_PEN_BAF_HOGS_COAXFO[index] <- if_else(df$PEN_BAF_HOGS_COAXFO[index]==0,0,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=25,1,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=50,2,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=75,3,
if_else(df$PEN_BAF_HOGS_COAXFO[index]<=100,4,5)))))
}
# Creamos una columna para clasificar los municipios segun su grado de penetracion.
#La clasificación de Penetracion de Fibra Óptica y Cable Coaxial:
# Sin cobertura=0
# Muy baja 0>25%
# Baja 25%>50%
# Media 50%>75%
# Alta 75%>100%
# Muy Alta 100%
df$CLASS_PEN_BAF_HABS_COAXFO <- 0
for (index in 1:nrow(df)){
df$CLASS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$PEN_BAF_HABS_COAXFO[index]==0,0,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=10,1,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=20,2,
if_else(df$PEN_BAF_HABS_COAXFO[index]<=30.92,3,4))))
}
df$IS_PEN_BAF_HABS_COAXFO <- 0
for (index in 1:nrow(df)){
df$IS_PEN_BAF_HABS_COAXFO[index] <- if_else(df$CLASS_PEN_BAF_HABS_COAXFO[index]!=0,1,0)
}
#----- Agregamos una columna que nos diga la region socioecnomica a la que pertenece el municipio
RegionesSocioEcono <- read_csv("RegionesSocioEcono.csv",
col_types = cols(NOM_ABRE_ENTIDAD = col_skip(),
NOM_ENTIDAD = col_skip(), NUM = col_skip()))
df <- df %>% mutate(K_ENTIDAD = substr(K_ENTIDAD_MUNICIPIO,1,2))
df <- left_join(df,RegionesSocioEcono, by = "K_ENTIDAD")
df$K_ENTIDAD<-NULL
for (index in 1:nrow(df)){
df$REG_SOCIOECONOM[index] <- if_else(df$REG_SOCIOECONOM[index]=="Centronorte",1,
if_else(df$REG_SOCIOECONOM[index]=="Centrosur",2,
if_else(df$REG_SOCIOECONOM[index]=="Noreste",3,
if_else(df$REG_SOCIOECONOM[index]=="Noroeste",4,
if_else(df$REG_SOCIOECONOM[index]=="Occidente",5,
if_else(df$REG_SOCIOECONOM[index]=="Oriente",6,
if_else(df$REG_SOCIOECONOM[index]=="Sureste",7,8)))))))
}
# Adjuntamos los datos de indices de derechos humanos
df <- left_join(df, hd_index2015, by = "K_ENTIDAD_MUNICIPIO")
# ---- Seleccionamos columnas para el analisis
df1<- df %>% select(K_ENTIDAD_MUNICIPIO, HOGARES, POBLACION, SUPERFICIE, DENS_HOGS, DENS_HABS,
ANALF, SPRIM, ANOS_PROMEDIO_DE_ESCOLARIDAD,OVSAE, OVSEE, 'PL<5000', PO2SM, INGRESOPC_ANUAL,
DISP_INTERNET, DISP_TV_PAGA, DISP_TEL_CELULAR, DISP_TEL_FIJO,
NUM_OPS, PEN_BAF_HOGS_COAXFO, IS_PEN_BAF_HABS_COAXFO)
View(df1)
write_csv(df1, "BAF_06209_selected.csv")
df1<- df %>% select(K_ENTIDAD_MUNICIPIO, HOGARES, POBLACION, SUPERFICIE, DENS_HOGS, DENS_HABS,
ANALF, SPRIM, ANOS_PROMEDIO_DE_ESCOLARIDAD,OVSAE, OVSEE, 'PL<5000', PO2SM, INGRESOPC_ANUAL,
DISP_INTERNET, DISP_TV_PAGA, DISP_TEL_CELULAR, DISP_TEL_FIJO,
NUM_OPS, CLASS_PEN_BAF_HOGS_COAXFO, IS_PEN_BAF_HABS_COAXFO)
View(df1)
write_csv(df1, "BAF_06209_selected.csv")
